<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#FFFFFF"
    android:fillViewport="true">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical">

        <!-- Header -->
        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:padding="16dp"
            android:background="@color/background_light_peach"
            android:gravity="center_vertical">

            <ImageButton
                android:id="@+id/btn_back"
                android:layout_width="40dp"
                android:layout_height="40dp"
                android:src="@drawable/ic_back"
                android:background="?attr/selectableItemBackgroundBorderless"
                android:contentDescription="Back"
                app:tint="@color/black" />

            <TextView
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="Bảo mật tài khoản"
                android:textColor="@color/black"
                android:textSize="20sp"
                android:textStyle="bold"
                android:layout_marginStart="8dp" />
        </LinearLayout>

        <!-- Card: 2FA Settings -->
        <androidx.cardview.widget.CardView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_margin="16dp"
            app:cardCornerRadius="12dp"
            app:cardElevation="4dp">

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:padding="16dp">

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="XÁC THỰC 2 BƯỚC"
                    android:textSize="16sp"
                    android:textStyle="bold"
                    android:textColor="#1976D2"
                    android:layout_marginBottom="8dp" />

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Thêm lớp bảo mật cho tài khoản của bạn"
                    android:textSize="14sp"
                    android:textColor="#666666"
                    android:layout_marginBottom="16dp" />

                <!-- Switch 2FA -->
                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal"
                    android:gravity="center_vertical"
                    android:background="#F0F0F0"
                    android:padding="12dp">

                    <LinearLayout
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1"
                        android:orientation="vertical">

                        <TextView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="Xác thực 2 bước"
                            android:textSize="16sp"
                            android:textStyle="bold"
                            android:textColor="#000000" />

                        <TextView
                            android:id="@+id/tv_otp_status"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="⚠Xác thực 2 bước đang TẮT"
                            android:textSize="12sp"
                            android:layout_marginTop="4dp" />
                    </LinearLayout>

                    <Switch
                        android:id="@+id/switch_2fa"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content" />
                </LinearLayout>

                <!-- Setup 2FA Form -->
                <LinearLayout
                    android:id="@+id/layout_2fa_setup"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    android:layout_marginTop="16dp"
                    android:visibility="gone">

                    <View
                        android:layout_width="match_parent"
                        android:layout_height="1dp"
                        android:background="#E0E0E0"
                        android:layout_marginBottom="16dp" />

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Thiết lập xác thực 2 bước"
                        android:textSize="14sp"
                        android:textStyle="bold"
                        android:textColor="#000000"
                        android:layout_marginBottom="12dp" />

                    <TextView
                        android:id="@+id/tv_email"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Email: u***@gmail.com"
                        android:textSize="14sp"
                        android:textColor="#666666"
                        android:layout_marginBottom="16dp" />

                    <!-- Send OTP Button -->
                    <Button
                        android:id="@+id/btn_send_otp"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:text="Gửi mã OTP"
                        android:textColor="#FFFFFF"
                        android:backgroundTint="#2196F3"
                        android:padding="12dp" />

                    <!-- Countdown -->
                    <TextView
                        android:id="@+id/tv_countdown"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Mã OTP hết hiệu lực sau: 60s"
                        android:textSize="12sp"
                        android:textColor="#FF5722"
                        android:layout_marginTop="8dp"
                        android:visibility="gone" />

                    <!-- OTP Input -->
                    <com.google.android.material.textfield.TextInputLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:layout_marginTop="16dp"
                        android:hint="Nhập mã OTP (6 số)">

                        <com.google.android.material.textfield.TextInputEditText
                            android:id="@+id/et_otp"
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:inputType="number"
                            android:maxLength="6"
                            android:textSize="18sp"
                            android:textStyle="bold"
                            android:gravity="center" />
                    </com.google.android.material.textfield.TextInputLayout>

                    <!-- Verify Button -->
                    <Button
                        android:id="@+id/btn_verify_otp"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:text="Xác thực"
                        android:textColor="#FFFFFF"
                        android:backgroundTint="#4CAF50"
                        android:padding="12dp"
                        android:layout_marginTop="16dp" />
                </LinearLayout>
            </LinearLayout>
        </androidx.cardview.widget.CardView>

        <!-- Info Card -->
        <androidx.cardview.widget.CardView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginStart="16dp"
            android:layout_marginEnd="16dp"
            android:layout_marginBottom="16dp"
            app:cardCornerRadius="12dp"
            app:cardElevation="4dp"
            app:cardBackgroundColor="#E3F2FD">

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:padding="16dp">

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Về xác thực 2 bước"
                    android:textSize="14sp"
                    android:textStyle="bold"
                    android:textColor="#1976D2"
                    android:layout_marginBottom="8dp" />

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="• Khi bật xác thực 2 bước, bạn sẽ cần nhập mã OTP mỗi khi đăng nhập\n\n• Mã OTP sẽ được gửi đến email của bạn\n\n• Mã OTP có hiệu lực trong 60 giây\n\n• Không chia sẻ mã OTP với bất kỳ ai"
                    android:textSize="12sp"
                    android:textColor="#1976D2"
                    android:lineSpacingExtra="4dp" />
            </LinearLayout>
        </androidx.cardview.widget.CardView>

        <!-- Test Info (chỉ hiển thị trong development) -->
        <TextView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="Mã OTP sẽ hiển thị trong Toast để test\n(Trong production, mã sẽ được gửi qua email)"
            android:textSize="10sp"
            android:textColor="#999999"
            android:padding="16dp"
            android:gravity="center"
            android:background="#FFFACA" />

    </LinearLayout>
</ScrollView>